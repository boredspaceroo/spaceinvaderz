<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>Wireframe Invaders</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;touch-action:none}
body{overflow:hidden;background:#000;font-family:monospace}
canvas{display:block;width:100vw;height:100vh}
#ui{position:fixed;top:20px;left:20px;color:#0ff;font-size:20px;text-shadow:0 0 10px #0ff;z-index:10;pointer-events:none}
#msg{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);color:#0ff;font-size:32px;text-align:center;text-shadow:0 0 20px #0ff;z-index:20;pointer-events:none;opacity:0;transition:opacity .3s}
#start{position:fixed;bottom:40px;left:50%;transform:translateX(-50%);padding:15px 40px;background:transparent;border:2px solid #0ff;color:#0ff;font-size:24px;cursor:pointer;text-shadow:0 0 10px #0ff;box-shadow:0 0 20px #0ff;z-index:30;font-family:monospace}
#start:hover{background:#0ff;color:#000}
.hide{display:none!important}
#touch{position:fixed;bottom:0;left:0;right:0;height:200px;z-index:15;display:none}
@media(max-width:768px){#ui{font-size:16px}#msg{font-size:24px}#start{font-size:18px;padding:12px 30px}}
</style>
</head>
<body>
<div id="ui">
<div>SCORE: <span id="score">0</span></div>
<div>STAGE: <span id="stage">1</span></div>
<div>LIVES: <span id="lives">3</span></div>
</div>
<div id="msg"></div>
<button id="start">START GAME</button>
<div id="touch"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
const W=window.innerWidth,H=window.innerHeight;
let scene,camera,renderer,player,bullets=[],enemies=[],particles=[],score=0,lives=3,stage=1,gameActive=!1,keys={},touchX=0,audioCtx,sounds={};

// Audio setup
const initAudio=()=>{
audioCtx=new(window.AudioContext||window.webkitAudioContext)();
sounds.shoot=f=>{const o=audioCtx.createOscillator(),g=audioCtx.createGain();o.connect(g);g.connect(audioCtx.destination);o.frequency.value=400;g.gain.setValueAtTime(.3,audioCtx.currentTime);g.gain.exponentialRampToValueAtTime(.01,audioCtx.currentTime+.1);o.start();o.stop(audioCtx.currentTime+.1)};
sounds.explode=f=>{const o=audioCtx.createOscillator(),g=audioCtx.createGain();o.connect(g);g.connect(audioCtx.destination);o.type=‘sawtooth’;o.frequency.setValueAtTime(200,audioCtx.currentTime);o.frequency.exponentialRampToValueAtTime(50,audioCtx.currentTime+.3);g.gain.setValueAtTime(.4,audioCtx.currentTime);g.gain.exponentialRampToValueAtTime(.01,audioCtx.currentTime+.3);o.start();o.stop(audioCtx.currentTime+.3)};
sounds.hit=f=>{const o=audioCtx.createOscillator(),g=audioCtx.createGain();o.connect(g);g.connect(audioCtx.destination);o.frequency.value=100;g.gain.setValueAtTime(.5,audioCtx.currentTime);g.gain.exponentialRampToValueAtTime(.01,audioCtx.currentTime+.2);o.start();o.stop(audioCtx.currentTime+.2)};
sounds.stage=f=>{const o=audioCtx.createOscillator(),g=audioCtx.createGain();o.connect(g);g.connect(audioCtx.destination);o.frequency.setValueAtTime(300,audioCtx.currentTime);o.frequency.setValueAtTime(500,audioCtx.currentTime+.1);o.frequency.setValueAtTime(700,audioCtx.currentTime+.2);g.gain.setValueAtTime(.3,audioCtx.currentTime);g.gain.exponentialRampToValueAtTime(.01,audioCtx.currentTime+.3);o.start();o.stop(audioCtx.currentTime+.3)}
};

// Init Three.js
const init=()=>{
scene=new THREE.Scene();
camera=new THREE.PerspectiveCamera(75,W/H,.1,1000);
camera.position.z=30;
renderer=new THREE.WebGLRenderer({antialias:!0});
renderer.setSize(W,H);
renderer.setClearColor(0x000000);
document.body.appendChild(renderer.domElement);

// Elaborate player ship wireframe
const shipGeom=new THREE.BufferGeometry();
const v=[
0,0,0, -1.5,-1,0, 1.5,-1,0,  // Main triangle
-1.5,-1,0, -2,-1.5,0, -1.5,-2,0, -1,-1.5,0,  // Left wing
1.5,-1,0, 2,-1.5,0, 1.5,-2,0, 1,-1.5,0,  // Right wing
0,0,0, 0,.5,.5, -.3,-.2,.3, .3,-.2,.3,  // Cockpit
-1,-1.5,0, -1,-1.5,-.5, -.5,-1,-.3,  // Left engine
1,-1.5,0, 1,-1.5,-.5, .5,-1,-.3,  // Right engine
-.8,-.8,0, -.6,-1.2,0,  // Details
.8,-.8,0, .6,-1.2,0
];
const i=[
0,1, 0,2, 1,2,  // Main
3,4, 4,5, 5,6, 6,3,  // Left wing
7,8, 8,9, 9,10, 10,7,  // Right wing
11,12, 12,13, 13,14, 14,11,  // Cockpit
15,16, 16,17, 17,15,  // Left engine
18,19, 19,20, 20,18,  // Right engine
21,22, 23,24  // Details
];
shipGeom.setAttribute(‘position’,new THREE.Float32BufferAttribute(v,3));
shipGeom.setIndex(i);
const shipMat=new THREE.LineBasicMaterial({color:0x00ffff});
player=new THREE.LineSegments(shipGeom,shipMat);
player.position.y=-12;
scene.add(player);

createEnemies();
animate();
};

// Create enemy formation
const createEnemies=()=>{
const rows=3+stage,cols=5+Math.floor(stage/2);
const spacing=3;
const startX=-(cols-1)*spacing/2;
const startY=10;

for(let r=0;r<rows;r++){
for(let c=0;c<cols;c++){
const geom=new THREE.BufferGeometry();
const size=.8;
const v=[
-size,size,0, size,size,0, size,-size,0, -size,-size,0,  // Square
0,size*1.5,0,  // Top antenna
-size*1.3,0,0, size*1.3,0,0  // Side antennas
];
const idx=[0,1, 1,2, 2,3, 3,0, 0,4, 1,4, 3,5, 2,6];
geom.setAttribute(‘position’,new THREE.Float32BufferAttribute(v,3));
geom.setIndex(idx);
const mat=new THREE.LineBasicMaterial({color:0xff00ff});
const enemy=new THREE.LineSegments(geom,mat);
enemy.position.set(startX+c*spacing,startY-r*2,0);
enemy.userData={hp:1+Math.floor(stage/3),speed:.02*stage,dir:1};
scene.add(enemy);
enemies.push(enemy);
}
}
};

// Particle system
const createParticles=(x,y,color)=>{
for(let i=0;i<20;i++){
const geom=new THREE.BufferGeometry();
const v=[0,0,0];
geom.setAttribute(‘position’,new THREE.Float32BufferAttribute(v,3));
const mat=new THREE.PointsMaterial({color:color,size:.2});
const particle=new THREE.Points(geom,mat);
particle.position.set(x,y,0);
particle.userData={
vx:(Math.random()-.5)*.3,
vy:(Math.random()-.5)*.3,
life:30
};
scene.add(particle);
particles.push(particle);
}
};

// Shoot bullet
const shoot=()=>{
if(!gameActive)return;
const geom=new THREE.BufferGeometry();
geom.setAttribute(‘position’,new THREE.Float32BufferAttribute([0,0,0, 0,.5,0],3));
const mat=new THREE.LineBasicMaterial({color:0x00ff00});
const bullet=new THREE.Line(geom,mat);
bullet.position.copy(player.position);
bullet.position.y+=1;
scene.add(bullet);
bullets.push(bullet);
sounds.shoot&&sounds.shoot();
};

// Update game
const update=()=>{
if(!gameActive)return;

// Player movement
const speed=.5;
if((keys.ArrowLeft||keys.a)&&player.position.x>-15)player.position.x-=speed;
if((keys.ArrowRight||keys.d)&&player.position.x<15)player.position.x+=speed;
if(touchX!==0){
player.position.x+=(touchX-player.position.x)*.1;
}

// Bullets
bullets.forEach((b,i)=>{
b.position.y+=.6;
if(b.position.y>20){
scene.remove(b);
bullets.splice(i,1);
}
});

// Enemies movement & shooting
let edge=!1;
enemies.forEach(e=>{
e.position.x+=e.userData.speed*e.userData.dir;
if(Math.abs(e.position.x)>18)edge=!0;

```
// Enemy shoots randomly
if(Math.random()<.001*stage){
  const geom=new THREE.BufferGeometry();
  geom.setAttribute('position',new THREE.Float32BufferAttribute([0,0,0, 0,-.5,0],3));
  const mat=new THREE.LineBasicMaterial({color:0xff0000});
  const bullet=new THREE.Line(geom,mat);
  bullet.position.copy(e.position);
  bullet.userData.enemy=!0;
  scene.add(bullet);
  bullets.push(bullet);
}
```

});

if(edge){
enemies.forEach(e=>{
e.userData.dir*=-1;
e.position.y-=.5;
if(e.position.y<-10){
gameOver();
}
});
}

// Collision detection
bullets.forEach((b,bi)=>{
if(b.userData.enemy){
// Enemy bullet hits player
if(Math.abs(b.position.x-player.position.x)<1&&Math.abs(b.position.y-player.position.y)<1){
scene.remove(b);
bullets.splice(bi,1);
lives–;
document.getElementById(‘lives’).textContent=lives;
createParticles(player.position.x,player.position.y,0x00ffff);
sounds.hit&&sounds.hit();
if(lives<=0)gameOver();
}
b.position.y-=.4;
if(b.position.y<-15){
scene.remove(b);
bullets.splice(bi,1);
}
}else{
// Player bullet hits enemies
enemies.forEach((e,ei)=>{
if(Math.abs(b.position.x-e.position.x)<1&&Math.abs(b.position.y-e.position.y)<1){
scene.remove(b);
bullets.splice(bi,1);
e.userData.hp–;
if(e.userData.hp<=0){
scene.remove(e);
enemies.splice(ei,1);
score+=10*stage;
document.getElementById(‘score’).textContent=score;
createParticles(e.position.x,e.position.y,0xff00ff);
sounds.explode&&sounds.explode();
if(enemies.length===0)nextStage();
}
}
});
}
});

// Particles
particles.forEach((p,i)=>{
p.position.x+=p.userData.vx;
p.position.y+=p.userData.vy;
p.userData.life–;
p.material.opacity=p.userData.life/30;
if(p.userData.life<=0){
scene.remove(p);
particles.splice(i,1);
}
});
};

// Next stage
const nextStage=()=>{
gameActive=!1;
stage++;
document.getElementById(‘stage’).textContent=stage;
showMsg(`STAGE ${stage}`);
sounds.stage&&sounds.stage();
setTimeout(()=>{
createEnemies();
gameActive=!0;
hideMsg();
},2000);
};

// Game over
const gameOver=()=>{
gameActive=!1;
showMsg(’GAME OVER<br>Score: ’+score);
document.getElementById(‘start’).classList.remove(‘hide’);
document.getElementById(‘start’).textContent=‘RESTART’;
};

// UI messages
const showMsg=txt=>{
const m=document.getElementById(‘msg’);
m.innerHTML=txt;
m.style.opacity=1;
};
const hideMsg=()=>{document.getElementById(‘msg’).style.opacity=0};

// Animation loop
const animate=()=>{
requestAnimationFrame(animate);
update();
renderer.render(scene,camera);
};

// Event listeners
document.addEventListener(‘keydown’,e=>{
keys[e.key]=!0;
if(e.key===’ ’&&gameActive)shoot();
});
document.addEventListener(‘keyup’,e=>keys[e.key]=!1);

// Touch controls
let touching=!1;
document.getElementById(‘touch’).addEventListener(‘touchstart’,e=>{
if(!gameActive)return;
touching=!0;
touchX=(e.touches[0].clientX/W)*30-15;
shoot();
});
document.getElementById(‘touch’).addEventListener(‘touchmove’,e=>{
if(!touching)return;
e.preventDefault();
touchX=(e.touches[0].clientX/W)*30-15;
});
document.getElementById(‘touch’).addEventListener(‘touchend’,()=>{
touching=!1;
touchX=0;
});

// Mouse controls for desktop
renderer.domElement.addEventListener(‘click’,e=>{
if(gameActive)shoot();
});
renderer.domElement.addEventListener(‘mousemove’,e=>{
if(gameActive){
player.position.x=(e.clientX/W)*30-15;
}
});

// Start game
document.getElementById(‘start’).addEventListener(‘click’,()=>{
if(audioCtx===undefined)initAudio();

// Reset game
bullets.forEach(b=>scene.remove(b));
enemies.forEach(e=>scene.remove(e));
particles.forEach(p=>scene.remove(p));
bullets=[];
enemies=[];
particles=[];
score=0;
lives=3;
stage=1;

document.getElementById(‘score’).textContent=0;
document.getElementById(‘lives’).textContent=3;
document.getElementById(‘stage’).textContent=1;
document.getElementById(‘start’).classList.add(‘hide’);

player.position.set(0,-12,0);
createEnemies();
gameActive=!0;
hideMsg();

// Show touch controls on mobile
if(‘ontouchstart’ in window){
document.getElementById(‘touch’).style.display=‘block’;
}
});

// Resize handler
window.addEventListener(‘resize’,()=>{
const w=window.innerWidth,h=window.innerHeight;
camera.aspect=w/h;
camera.updateProjectionMatrix();
renderer.setSize(w,h);
});

// Initialize
init();
</script>

</body>
</html>
